{
    "id": "e1ac412b-7e9c-4e26-9aa9-c8e43661ba01",
    "createdAt": 1753686654887,
    "updatedAt": 1753716834361,
    "text": "############### Upload Embeddings Model ###############\n\n### Load and setup model ###\nPUT /_cluster/settings\n{\n  \"persistent\": {\n    \"plugins.ml_commons.only_run_on_ml_node\" : \"false\",\n    \"plugins.ml_commons.memory_feature_enabled\": \"true\",\n    \"plugins.ml_commons.disk_free_space_threshold\" : \"15G\",\n    \"plugins.ml_commons.native_memory_threshold\" : \"100\",\n    \"plugins.ml_commons.jvm_heap_memory_threshold\" : \"100\"\n  }\n}\n\n# model_group_id = FWODUJgBtWo8esoJlMoE\nPOST /_plugins/_ml/model_groups/_register\n{\n    \"name\": \"Sova documents group\", \n    \"description\": \"A model group for Sova system\"\n}\n\n# task_id = qGOaUJgBtWo8esoJsMrk\nPOST /_plugins/_ml/models/_upload\n{\n  \"name\": \"huggingface/sentence-transformers/msmarco-distilbert-base-tas-b\",\n  \"version\": \"1.0.2\",\n  \"model_format\": \"TORCH_SCRIPT\"\n}\n\n# model_id = rGOaUJgBtWo8esoJtMpR\nGET /_plugins/_ml/tasks/qGOaUJgBtWo8esoJsMrk\n\n# task_id = S2PFUJgBtWo8esoJMcsh\nPOST /_plugins/_ml/models/rGOaUJgBtWo8esoJtMpR/_deploy\n\n# model_id = rGOaUJgBtWo8esoJtMpR\nGET /_plugins/_ml/tasks/S2PFUJgBtWo8esoJMcsh\n\n# task_id = a2OPUJgBtWo8esoJcsqS\nPOST /_plugins/_ml/models/_upload\n{\n  \"name\": \"huggingface/sentence-transformers/all-MiniLM-L6-v2\",\n  \"version\": \"1.0.1\",\n  \"model_format\": \"TORCH_SCRIPT\"\n}\n\n# model_id = b2OPUJgBtWo8esoJd8qO\nGET /_plugins/_ml/tasks/a2OPUJgBtWo8esoJcsqS\n\n# task_id = iGOUUJgBtWo8esoJYspU\nPOST /_plugins/_ml/models/b2OPUJgBtWo8esoJd8qO/_load\n{\n  \"parameters\": {\n    \"wait_for_completion\": true\n  }\n}\n\n# model_id = b2OPUJgBtWo8esoJd8qO\nGET /_plugins/_ml/tasks/iGOUUJgBtWo8esoJYspU\n\nPOST /_plugins/_ml/models/_search\n{\n  \"query\": {\n    \"match_all\": {}\n  },\n  \"size\": 1000\n}\n\nPUT /_ingest/pipeline/embeddings-ingest-pipeline\n{\n  \"description\": \"Pipeline for generating embeddings\",\n  \"processors\": [\n    {\n      \"text_chunking\": {\n        \"algorithm\": {\n          \"fixed_token_length\": {\n            \"token_limit\": 50,\n            \"overlap_rate\": 0.2,\n            \"tokenizer\": \"standard\"\n          }\n        },\n        \"field_map\": {\n          \"content\": \"chunked_text\"\n        }\n      }\n    },\n    {\n      \"text_embedding\": {\n        \"model_id\": \"b2OPUJgBtWo8esoJd8qO\",\n        \"field_map\": {\n          \"chunked_text\": \"embeddings\"\n        }\n      }\n    }\n  ]\n}\n\nPUT /_search/pipeline/embeddings-ingest-pipeline\n{\n  \"description\": \"Post processor for hybrid search\",\n  \"request_processors\": [\n    {\n      \"neural_query_enricher\" : {\n        \"default_model_id\": \"b2OPUJgBtWo8esoJd8qO\"\n      }\n    }\n  ],\n  \"phase_results_processors\": [\n    {\n      \"normalization-processor\": {\n        \"normalization\": {\n          \"technique\": \"min_max\"\n        },\n        \"combination\": {\n          \"technique\": \"arithmetic_mean\",\n          \"parameters\": {\n            \"weights\": [\n              0.3,\n              0.7\n            ]\n          }\n        }\n      }\n    }\n  ]\n}\n\n\n\n\n\n\n\n\n\nPUT /_plugins/_security/api/roles/user_access\n{\n  \"cluster_permissions\": [\n    \"cluster:monitor/main\",\n    \"cluster:admin/opensearch/ml/predict\",\n    \"indices:admin/resolve/index\",\n    \"indices:admin/mappings/fields/get*\",\n    \"indices:data/read*\",\n    \"indices:data/write/index\"\n  ],\n  \"index_permissions\": [{\n    \"index_patterns\": [\"${user.name}_*\"],\n    \"allowed_actions\": [\n      \"indices:data/read*\",\n      \"indices:data/write*\",\n      \"indices:admin/create\",\n      \"indices:admin/delete\",\n      \"indices:admin/get\",\n      \"indices:admin/mapping/put\",\n      \"indices:admin/refresh*\",\n      \"indices:admin/resolve/index\",\n      \"indices:admin/search*\",\n      \"indices:admin/validate/query\",\n      \"indices:monitor/stats\",\n      \"indices:monitor/settings/get\",\n      \"indices:monitoring/get\"\n    ]\n  }]\n}\n\nPUT /_plugins/_security/api/internalusers/user1\n{\n  \"password\": \"SecurePass123!\",\n  \"backend_roles\": [\"individual_role\"]\n}\n\nPUT /_plugins/_security/api/rolesmapping/user_access\n{\n  \"users\": [\"user1\"]\n}\n\n\n\n\n\n\n\n\n\n\n\n\n"
}